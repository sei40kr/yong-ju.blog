{{ if not (.Page.Scratch.Get "mermaid") }}
  <!-- Include mermaid only first time -->
  <script src="{{ "vendor/mermaid-8.12.1/mermaid.min.js" | relURL }}"></script>
  {{ with resources.Get "mermaid.json" }}
    <script>mermaid.initialize({{ .Content | safeJS }})</script>
  {{ end }}
  {{ .Page.Scratch.Set "mermaid" true }}
{{ end }}

<div class="mermaid{{ with .Get "class" }} {{ . }}{{ end }}">
    {{- .Inner -}}
</div>
